|-------------------------------------------------------------------------------|
| Aula      : Finalizando SessÃµes												|
| MÃ³dulo    : IntroducÌ§aÌƒo a performance e tuning                                 |
| Curso     : Oracle Fundamentals                                               |
| Instrutor : Marcio Mandarino                                                  |
| URL       : mrdba.com.br/oracle_fundamentals                                  |
|-------------------------------------------------------------------------------|
| ReferÃªncia: https://docs.oracle.com/en/database/oracle/oracle-database/19/admin/managing-processes.html#GUID-260EE1DC-D306-4B4E-B848-A94DA2F46615
|-------------------------------------------------------------------------------|


=================================================================
== ğŸ¯ Objetivos da Aula:
=================================================================
ğŸ’¡ Aprender a finalizar uma sessÃ£o no Oracle


=================================================================
== ğŸ¯ Resumo
=================================================================
ğŸ“ Conceito geral
ğŸ“ Comando para finalizar uma sessÃ£o
ğŸ“ Identificando sessÃµes
ğŸ“ Finalizando uma sessÃ£o
ğŸ“ Finalizando uma sessÃ£o em ambientes Oracle RAC
ğŸ“ ConclusÃ£o


=================================================================
== ğŸ¯ Conceito geral
=================================================================
â–¶ï¸ Ã‰ muito comum no dia a dia do DBA, termos que finalizar uma sessÃ£o
â–¶ï¸ Quando uma sessÃ£o Ã© finalizada, todas as transaÃ§Ãµes serÃ£o submetidas a rollback
âš ï¸ Dependendo do tamanho da transaÃ§Ã£o, o rollback pode demorar minutos ou horas!
â–¶ï¸ Existem diversos fatores que podem ocorrer para termos que finalizar uma sessÃ£o:
	â–«ï¸ SessÃ£o gerando bloqueios
	â–«ï¸ SessÃ£o rodando um processamento pesado de mais
	â–«ï¸ SessÃ£o fazendo algo que nÃ£o deveria
	â–«ï¸ Processo nÃ£o terminou dentro do tempo esperado


=================================================================
== ğŸ¯ Comando para finalizar uma sessÃ£o
=================================================================
SQL> ALTER SYSTEM KILL SESSION 'SID,SERIAL#';


=================================================================
== ğŸ¯ Identificando sessÃµes 
=================================================================
-- Oracle Single
SQL> col program form a50
SQL> select sid, serial#, program, status from v$session;


-- Oracle Single
SQL> col program form a50
SQL> select inst_id, sid, serial#, program, status from gv$session;

-- Usando o @quem
@quem
@quem2 1=1


=================================================================
== ğŸ¯ Finalizando uma sessÃ£o
=================================================================
SQL> alter system kill session '617,35864' immediate;
SQL> @kill sid serial


=================================================================
== ğŸ¯ Finalizando uma sessÃ£o em ambientes Oracle RAC
=================================================================
â–¶ï¸ Em ambientes Oracle RAC, vocÃª precisa especificar o nÃºmero da instÃ¢ncia

SQL> alter system kill session '61,1172,@2' immediate;
SQL> @kill sid serial


=================================================================
== ğŸ¯ ConclusÃ£o
=================================================================
ğŸ’¡ Ã‰ uma atividade do dia a dia do DBA, portanto, pratique bastante 
ğŸ’¡ Tenha boa desenvoltura no uso dos scripts quem, quem2, kill e kill2
ğŸ’¡ NÃ£o se preocupe em decorar os comandos
 