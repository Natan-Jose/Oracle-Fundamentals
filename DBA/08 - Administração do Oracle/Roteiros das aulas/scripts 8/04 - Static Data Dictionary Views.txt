|-------------------------------------------------------------------------------|
| Aula			: Static Data Dictionary Views									|
| MÃ³dulo		: Managing Oracle Database										|
| Curso			: Oracle Fundamentals											|
| Instrutor		: Marcio Mandarino												|
| URL			: mrdba.com.br/oracle_fundamentals								|
|-------------------------------------------------------------------------------|
| ReferÃªncia: https://docs.oracle.com/en/database/oracle/oracle-database/19/refrn/about-static-data-dictionary-views.html#GUID-10024282-6729-4C66-8679-FD653C9C7DE7
|-------------------------------------------------------------------------------|


=================================================================
== ğŸ¯ Objetivos da Aula:
=================================================================
ğŸ’¡ Esclarecer o que sÃ£o Static Data Dicionary Views
ğŸ’¡ Compreender a diferenÃ§a entre as views USER_, ALL_, DBA_ e CDB_
ğŸ’¡ Saber lidar com as Data Dicionary Views em ambientes PDBs 


=================================================================
== ğŸ¯ Resumo
=================================================================
ğŸ“ Conceito geral
ğŸ“ O que sÃ£o Data Dictionary Views?
ğŸ“ Tipos de Views do DicionÃ¡rio de Dados
ğŸ“ Data Dictionary no contexto de CDB
ğŸ“ Verificando as views existentes
ğŸ“ Exemplos de Data Dictionary Views
ğŸ“ Exemplo prÃ¡tico
ğŸ“ ConclusÃ£o


=================================================================
== ğŸ¯ Conceito geral
=================================================================
â–¶ï¸ Fornece informaÃ§Ãµes sobre o banco de dados e seus objetos. 
â–¶ï¸ Elas sÃ£o uma representaÃ§Ã£o tabular de informaÃ§Ãµes sobre o banco de dados, seus objetos, privilÃ©gios, otimizaÃ§Ãµes e muito mais.


=================================================================
== ğŸ¯ O que sÃ£o Data Dictionary Views?
=================================================================
â–¶ï¸ As tabelas do dicionÃ¡rio de dados nÃ£o sÃ£o diretamente acessÃ­veis.
â–¶ï¸ As informaÃ§Ãµes dessas views podem ser acessadas atravÃ©s das views do dicionÃ¡rio de dados.
â–¶ï¸ Para listar as views do dicionÃ¡rio disponÃ­veis, vocÃª pode consultar a view DICTIONARY ou DICT

=================================================================
== ğŸ¯ Tipos de Views do DicionÃ¡rio de Dados
=================================================================
â–¶ï¸ Existem quatro categorias principais de views do dicionÃ¡rio de dados:
	â–«ï¸ USER_ Views	: Mostra todas as informaÃ§Ãµes do esquema do usuÃ¡rio atual.
	â–«ï¸ ALL_ Views	: Mostra todas as informaÃ§Ãµes acessÃ­veis ao usuÃ¡rio atual.
	â–«ï¸ DBA_ Views	: Mostra todas as informaÃ§Ãµes relevantes em todo o banco de dados.

	â–«ï¸ CDB_ Views	: Mostra todas as informaÃ§Ãµes dos objetos do container.




=================================================================
== ğŸ¯ Data Dictionary no contexto de CDB
=================================================================
â–¶ï¸ No Oracle CDB, os metadados do dicionÃ¡rio de dados sÃ£o divididos entre o CDB root e os PDBs
â–¶ï¸ SÃ£o tabelas ou views contendo dados referentes a mÃºltiplos containers ou ao CDB inteiro.
â–¶ï¸ Todos os objetos de dados do container tÃªm uma coluna CON_ID.
â–¶ï¸ Para cada view DBA_, existe uma view correspondente CDB_.
â–¶ï¸ Quando o container atual Ã© um PDB, um usuÃ¡rio pode ver informaÃ§Ãµes do dicionÃ¡rio de dados apenas para o PDB atual.
â–¶ï¸ No entanto, quando o container atual Ã© o CDB root, um usuÃ¡rio comum pode consultar as views CDB_ para ver metadados para o CDB root e para PDBs para os quais esse usuÃ¡rio tem privilÃ©gios.


=================================================================
== ğŸ¯ Verificando as views existentes
=================================================================
SQL> col table_name form a30
SQL> col COMMENTS form a120
SQL> set lines 180
SQL> select * from dict where table_name like 'USER_%' order by table_name;
SQL> select * from dict where table_name like 'ALL_%' order by table_name;
SQL> select * from dict where table_name like 'DBA_%' order by table_name;
SQL> select * from dict where table_name like 'CDB_%' order by table_name;

=================================================================
== ğŸ¯ Exemplos de Data Dictionary Views
=================================================================
â–¶ï¸ DBA_TABLES (ALL E USER)			: Fornece informaÃ§Ãµes sobre todas as tabelas no banco de dados.
â–¶ï¸ DBA_INDEXES (ALL E USER)			: Mostra detalhes sobre os Ã­ndices existentes no banco de dados.
â–¶ï¸ DBA_CONSTRAINTS (ALL E USER)		: Fornece informaÃ§Ãµes sobre restriÃ§Ãµes (como PKs e FKs) em tabelas.
â–¶ï¸ DBA_USERS (ALL E USER)			: Lista todos os usuÃ¡rios do banco de dados.
â–¶ï¸ DBA_OBJECTS (ALL E USER)			: Mostra informaÃ§Ãµes sobre todos os objetos do banco de dados.
â–¶ï¸ DBA_VIEWS (ALL E USER)			: Fornece detalhes sobre as views definidas no banco de dados.
â–¶ï¸ DBA_TABLESPACES 					: Mostra informaÃ§Ãµes sobre as tablespaces do banco.
â–¶ï¸ DBA_SEQUENCES (ALL E USER)		: Fornece detalhes sobre sequÃªncias definidas no banco de dados.
â–¶ï¸ DBA_SYNONYMS (ALL E USER)			: Lista sinÃ´nimos definidos no banco de dados.
â–¶ï¸ DBA_ROLES (ALL E USER)			: Mostra informaÃ§Ãµes sobre os papÃ©is definidos.

=================================================================
== ğŸ¯ Exemplo prÃ¡tico
=================================================================
-- Criando 3 usuÃ¡rios
SQL> create user user1 identified by "Wellcome1";
SQL> create user user2 identified by "Wellcome1";
SQL> create user user3 identified by "Wellcome1";


-- Criando uma tabela
SQL> alter user user1 quota unlimited on USERS;
SQL> grant create table to user1;
SQL> grant create session to user1;
SQL> create table user1.tb_teste (coluna1 varchar2(100)) tablespace USERS;
SQL> grant create session to user2;
SQL> grant create session to user3;


-- Concedendo grants diferentes para os usuÃ¡rios user2 e user3
SQL> grant select on user1.tb_teste to user2;
SQL> grant select any table to user3;


-- Acessando o banco com o usuÃ¡rio user1
SQL> conn user1/"Wellcome1"
SQL> select table_name from user_tables;
SQL> select table_name from all_tables;
SQL> select table_name from dba_tables;

-- Acessando o banco com o usuÃ¡rio user2
SQL> conn user2/"Wellcome1"
SQL> select table_name from user_tables;
SQL> select table_name from all_tables;
SQL> select owner,table_name from all_tables where table_name = 'TB_TESTE';
SQL> select table_name from dba_tables;

-- Acessando o banco com o usuÃ¡rio user3
SQL> conn user3/"Wellcome1"
SQL> select table_name from user_tables;
SQL> select table_name from all_tables;
SQL> select owner,table_name from all_tables where table_name = 'TB_TESTE';
SQL> select table_name from dba_tables;


-- Caso o banco seja um CDB, acesse o container root:
SQL> col table_name form a30
SQL> col owner form a30

SQL> select CON_ID, owner, table_name from cdb_tables;


=================================================================
== ğŸ¯ ConclusÃ£o
=================================================================
ğŸ’¡ Conhecer as Static Data Dictionary Views do Oracle Ã© estratÃ©gico para o DBA
ğŸ’¡ Sua pasta de scripts deve possuir scripts para consultar essas views de forma rÃ¡pida

 