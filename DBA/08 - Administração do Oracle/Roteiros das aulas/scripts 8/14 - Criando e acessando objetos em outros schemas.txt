|-------------------------------------------------------------------------------|
| Aula      : Criando e acessando objetos em outros schemas						|
| MÃ³dulo    : Managing Oracle Database                                          |
| Curso     : Oracle Fundamentals                                               |
| Instrutor : Marcio Mandarino                                                  |
| URL       : mrdba.com.br/oracle_fundamentals                                  |
|-------------------------------------------------------------------------------|
| ReferÃªncia: https://docs.oracle.com/en/database/oracle/oracle-database/19/sqlrf/ALTER-SESSION.html#GUID-DC7B8CDD-4F89-40CC-875F-F70F673711D4
|-------------------------------------------------------------------------------|


=================================================================
== ğŸ¯ Objetivos da Aula:
=================================================================
ğŸ’¡ Entender a criaÃ§Ã£o e acesso de objetos em outros schemas
ğŸ’¡ Compreender a influÃªncia de especificar o owner ao criar um objeto
ğŸ’¡ Utilizar o comando ALTER SESSION SET CURRENT_SCHEMA
ğŸ’¡ Realizar exemplos prÃ¡ticos de criaÃ§Ã£o e acesso de objetos em diferentes schemas


=================================================================
== ğŸ¯ Resumo
=================================================================
ğŸ“ Conceito geral
ğŸ“ Criando um usuÃ¡rio com privilÃ©gios
ğŸ“ Criando um usuÃ¡rio com privilÃ©gios
ğŸ“ Utilizando ALTER SESSION SET CURRENT_SCHEMA
ğŸ“ ConclusÃ£o

=================================================================
== ğŸ¯ Conceito geral
=================================================================
â–¶ï¸ Ã‰ muito comum no dia a dia estarmos criando objetos em outros schemas
â–¶ï¸ Ã‰ necessÃ¡rio ter privilÃ©gios apropriados, como CREATE ANY TABLE, CREATE ANY PROCEDURE, etc


=================================================================
== ğŸ¯ Criando um usuÃ¡rio com privilÃ©gios 
=================================================================
-- Criar um usuÃ¡rio e conceder privilÃ©gios
SQL> CREATE USER user1 IDENTIFIED BY password;
SQL> GRANT CREATE SESSION, CREATE TABLE TO user1;

-- Criar outro usuÃ¡rio
SQL> CREATE USER user2 IDENTIFIED BY password;
SQL> GRANT CREATE SESSION, CREATE TABLE TO user2;

-- Conceder privilÃ©gios ao usuÃ¡rio user1 para criar objetos no schema user2
SQL> GRANT CREATE ANY TABLE TO user1;

=================================================================
== ğŸ¯ Criando um usuÃ¡rio com privilÃ©gios 
=================================================================
-- Conectar como user1
SQL> conn user1/password@ORCL

-- Criar uma tabela no schema user2
SQL> CREATE TABLE EMPLOYEES (
    employee_id NUMBER PRIMARY KEY,
    first_name VARCHAR2(50),
    last_name VARCHAR2(50)
);

SQL> conn / as sysdba
SQL> grant ALTER ANY TABLE, CREATE ANY INDEX to user1;
SQL> conn user1/password@ORCL


=================================================================
== ğŸ¯ Utilizando ALTER SESSION SET CURRENT_SCHEMA 
=================================================================
ğŸ’¡ Esta Ã© uma opÃ§Ã£o Ãºtil quando precisamos criar muitos objetos em outro schema
-- Conectar como user1
SQL> conn user1/password@ORCL

-- Alterar o schema atual para user2
SQL> ALTER SESSION SET CURRENT_SCHEMA = user2;


SQL> SELECT SYS_CONTEXT('USERENV', 'CURRENT_SCHEMA')  FROM DUAL;

-- Criar uma tabela no schema user2 sem especificar o owner
SQL> CREATE TABLE departments (
    department_id NUMBER PRIMARY KEY,
    department_name VARCHAR2(50)
);

=================================================================
== ğŸ¯ ConclusÃ£o
=================================================================
ğŸ’¡ Essa Ã© uma atividade cotidiana do DBA, domine-a.
ğŸ’¡ Ã‰ algo simples, porÃ©m muitos DBAs em inÃ­cio de carreira tem dificuldades com essse assunto
