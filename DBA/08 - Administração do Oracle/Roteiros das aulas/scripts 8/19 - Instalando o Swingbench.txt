|-------------------------------------------------------------------------------|
| Aula      : Criando uma estrutura para testes									|
| MÃ³dulo    : Managing Oracle Database                                          |
| Curso     : Oracle Fundamentals                                               |
| Instrutor : Marcio Mandarino                                                  |
| URL       : mrdba.com.br/oracle_fundamentals                                  |
|-------------------------------------------------------------------------------|
| ReferÃªncia: https://www.dominicgiles.com
|-------------------------------------------------------------------------------|


=================================================================
== ðŸŽ¯ Objetivos da Aula:
=================================================================
ðŸ’¡ Aprender a criar uma estrutura para fazer testes de carga


=================================================================
== ðŸŽ¯ O que Ã© o Swingbench
=================================================================
â–¶ï¸ Ã‰ um stress test para o Oracle database (12c, 18c, 19c, 21c, 23c)
â–¶ï¸ Ã‰ grÃ¡tis
â–¶ï¸ Muito Ãºtil para simular cenÃ¡rios de carga


=================================================================
== ðŸŽ¯ Links para download (java e swingbench)
=================================================================
https://www.dominicgiles.com/downloads/
https://www.oracle.com/java/technologies/javase/jdk17-archive-downloads.html	


=================================================================
== ðŸŽ¯ CriaÃ§Ã£o do diretÃ³rio temporÃ¡rio
=================================================================
# mkdir /u01/swingbenchlatest
# cd /u01/swingbenchlatest


=================================================================
== ðŸŽ¯ Download dos pacotes necessÃ¡rios
=================================================================
# curl -L -o swingbenchlatest.zip https://www.dominicgiles.com/site_downloads/swingbenchlatest.zip
# curl -L -o jdk-17.0.7_linux-x64_bin.rpm https://download.oracle.com/java/17/archive/jdk-17.0.7_linux-x64_bin.rpm


=================================================================
== ðŸŽ¯ InstalaÃ§Ã£o do Java
=================================================================
# dnf -y localinstall jdk-17.0.7_linux-x64_bin.rpm

=================================================================
== ðŸŽ¯ DescompactaÃ§Ã£o do swingbench
=================================================================
# unzip swingbenchlatest.zip
# cd swingbench/bin


=================================================================
== ðŸŽ¯ Criando a tablespace (database ORCL)
=================================================================
$ . oraenv 
SQL> create tablespace TS_SOE datafile size 1g  autoextend on next 1g maxsize 31g;


=================================================================
== ðŸŽ¯ Criando o schema e populando as tabelas
=================================================================
Obs.  -scale 1 Define o size do schema, quanto maior mais dados.

# ./oewizard -cl -create -cs //localhost/orcl -u SOE -p SOE -scale 1 -tc 4 -dba "sys as sysdba" -dbap "Wellcome1" -ts TS_SOE

SQL > SELECT * FROM DBA_TABLES
	  WHERE OWNER = 'SOE';

SQL> SELECT TABLE_NAME, NUM_ROWS
	 FROM DBA_TABLES
	 WHERE OWNER = 'SOE';


# cd $ORACLE_HOME/suptools/oratop/
# ./oratop -rf / as sysdba

=================================================================
== ðŸŽ¯ Simulando o stress test
=================================================================
Obs. O parÃ¢metro -uc 10 define a quantidade de usuÃ¡rios simultÃ¢neos
$ ./charbench -uc 10 -cs //localhost/orcl -c ../configs/SOE_Server_Side_V2.xml -u SOE -p SOE -parallel 2


=================================================================
== ðŸŽ¯ ConclusÃ£o
=================================================================
ðŸ’¡ Ã‰ uma ferramenta muito Ãºtil para simular cenÃ¡rios de Stress Test