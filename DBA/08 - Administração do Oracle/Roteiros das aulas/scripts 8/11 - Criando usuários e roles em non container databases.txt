|-------------------------------------------------------------------------------|
| Aula      : Criando usuaÌrios e roles em non container databases				|
| MÃ³dulo    : Managing Oracle Database                                          |
| Curso     : Oracle Fundamentals                                               |
| Instrutor : Marcio Mandarino                                                  |
| URL       : mrdba.com.br/oracle_fundamentals                                  |
|-------------------------------------------------------------------------------|
| ReferÃªncia: https://docs.oracle.com/en/database/oracle/oracle-database/19/multi/overview-of-the-multitenant-architecture.html#GUID-B14FD999-8FB2-428E-9122-BCB55DE516B8
|-------------------------------------------------------------------------------|


=================================================================
== ğŸ¯ Objetivos da Aula:
=================================================================
ğŸ’¡ Aprender mais profundamente sobre criaÃ§Ã£o de usuÃ¡rios no Oracle


=================================================================
== ğŸ¯ Resumo
=================================================================
ğŸ“ Conceito geral
ğŸ“ Criando UsuÃ¡rios
ğŸ“ Configurando Quotas de Tablespace
ğŸ“ Concedendo PrivilÃ©gios a UsuÃ¡rios
ğŸ“ Utilizando o Comando ALTER USER
ğŸ“ ConclusÃ£o

=================================================================
== ğŸ¯ Conceito geral
=================================================================
â–¶ï¸ Em um ambiente non-container, todos os usuÃ¡rios e seus esquemas sÃ£o gerenciados dentro de um Ãºnico banco de dados
â–¶ï¸ Ã‰ uma estrutura mais simples de se entender
â–¶ï¸ Ã‰ mais comum encontrar esse tipo de estrutura


=================================================================
== ğŸ¯ Criando UsuÃ¡rios
=================================================================
â–¶ï¸ Para criar um usuÃ¡rio, utilizamos o comando CREATE USER.

-- Conectar ao banco de dados como sysdba
$ . oraenv
$ sqlplus / as sysdba

-- Criar um usuÃ¡rio
SQL> CREATE USER user1 IDENTIFIED BY password;

=================================================================
== ğŸ¯ Configurando Quotas de Tablespace
=================================================================
â–¶ï¸ Quotas de tablespace definem o espaÃ§o que um usuÃ¡rio pode utilizar em uma tablespace especÃ­fica.

-- Definir quota de 100 MB na tablespace USERS para o usuÃ¡rio user1
SQL> ALTER USER user1 QUOTA 100M ON USERS;

-- Definir quota ilimitada na tablespace USERS para o usuÃ¡rio user1
SQL> ALTER USER user1 QUOTA UNLIMITED ON USERS;


=================================================================
== ğŸ¯ Concedendo PrivilÃ©gios a UsuÃ¡rios
=================================================================
â–¶ï¸ PrivilÃ©gios permitem que os usuÃ¡rios realizem diversas operaÃ§Ãµes dentro do banco de dados.

-- Conceder privilÃ©gios de sistema ao usuÃ¡rio user1
SQL> GRANT CREATE SESSION, CREATE TABLE TO user1;

-- Conceder privilÃ©gios de objeto ao usuÃ¡rio user1
SQL> GRANT SELECT, INSERT ON hr.employees TO user1;


=================================================================
== ğŸ¯ Utilizando o Comando ALTER USER
=================================================================
â–¶ï¸ O comando ALTER USER Ã© utilizado para modificar atributos de um usuÃ¡rio existente.

-- Alterar a senha do usuÃ¡rio user1
SQL> ALTER USER user1 IDENTIFIED BY new_password;

-- Bloquear o usuÃ¡rio user1
SQL> ALTER USER user1 ACCOUNT LOCK;

-- Desbloquear o usuÃ¡rio user1
SQL> ALTER USER user1 ACCOUNT UNLOCK;


-- Alterar o default tablespace do usuÃ¡rio user1
SQL> ALTER USER user1 DEFAULT TABLESPACE users;

-- Alterar o temporary tablespace do usuÃ¡rio user1
SQL> ALTER USER user1 TEMPORARY TABLESPACE temp;

-- Expirar a senha do usuÃ¡rio user1 para forÃ§ar a mudanÃ§a na prÃ³xima conexÃ£o
SQL> ALTER USER user1 PASSWORD EXPIRE;


=================================================================
== ğŸ¯ Excluindo um usuÃ¡rio
=================================================================
ğŸ’€ Cuidao ao excluir um usuÃ¡rio, principalmente se ele tiver objetos
ğŸ’€ Fique atento ao ambiente que vocÃª estÃ¡ conectado

-- Exclui o usuÃ¡rio user1
SQL> drop user user1;

--
SQL> CREATE USER user1 IDENTIFIED BY password;
SQL> grant create table to user1;
SQL> create table user1.teste (x date);
SQL> drop user user1;
ORA-01922: CASCADE must be specified to drop 'USER1'

-- Elimina o usuÃ¡rio user1 e TODOS os objetos do owner user1
SQL> drop user user1 cascade;


=================================================================
== ğŸ¯ ConclusÃ£o
=================================================================
ğŸ’¡ Ã‰ uma tarefa muito tÃ­pica para o DBA criar e manter usuÃ¡rios no banco de dados
ğŸ’¡ Tenha bastante "fluÃªncia" na execuÃ§Ã£o dessas atividades
ğŸ’¡ NÃ£o copie e cole os comandos
 