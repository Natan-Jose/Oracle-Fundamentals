Aula        : Criando outros databases
Módulo      : Oracle Install
Instrutor   : Marcio Mandarino
URL         : https://docs.oracle.com/en/database/oracle/oracle-database

===============================================================
== Objetivos da Aula:
===============================================================
💡 Aprender a criar outros bancos e pdbs


===============================================================
== Agenda
===============================================================
✅ Criar o banco non-cdb  
✅ Criar o banco de testes  
✅ Verificando o banco criado  
✅ Criar outros pdbs (ORCLCDB1)


===============================================================
== Visão Geral
===============================================================
▶️ Criar databases não é uma tarefa comum no dia a dia do DBA  
▶️ Por isso, é importante praticar em ambientes de teste  
▶️ Você precisa de proficiência nesta atividade  


===============================================================
== Criar o banco non-cdb
===============================================================
$ export ORACLE_HOME=/u01/app/oracle/product/19c/db_2  
$ export PATH=$ORACLE_HOME/bin:$PATH  
$ which dbca  

$ dbca -silent -createDatabase       \  
 -templateName               General_Purpose.dbc \  
 -gdbname                    NONCDB              \  
 -sid                        NONCDB              \  
 -responseFile               NO_VALUE            \  
 -characterSet               AL32UTF8            \  
 -sysPassword                Welcome1            \  
 -systemPassword             Welcome1            \  
 -createAsContainerDatabase  false               \  
 -useOMF                     true                \  
 -databaseType               MULTIPURPOSE        \  
 -memoryMgmtType             auto_sga            \  
 -totalMemory                1024                \  
 -storageType                FS                  \  
 -datafileDestination        /u02/oradata        \  
 -recoveryAreaDestination    /backup             \  
 -recoveryAreaSize           20480               \  
 -redoLogFileSize            50                  \  
 -emConfiguration            NONE                \  
 -initparams                 "db_recovery_file_dest_size=15G, db_recovery_file_dest=/backup, db_create_online_log_dest_1=/u02/oradata/, db_create_online_log_dest_2=/u03/oradata/, log_archive_format=%t_%s_%r.dbf, processes=600, sessions=600, open_cursors=1000"





===============================================================
== Criar o banco de teste
===============================================================
$ export ORACLE_HOME=/u01/app/oracle/product/19c/db_3
$ export PATH=$ORACLE_HOME/bin:$PATH
$ which dbca

$ dbca -silent -createDatabase       \
 -templateName               General_Purpose.dbc \
 -gdbname                    TESTE               \
 -sid                      	 TESTE               \
 -responseFile               NO_VALUE            \
 -characterSet               AL32UTF8            \
 -sysPassword                Welcome1            \
 -systemPassword             Welcome1            \
 -createAsContainerDatabase  true                \
 -numberOfPDBs               1                   \
 -pdbName                    pdb_teste1          \
 -useOMF                     true                \
 -pdbAdminPassword           Wellcome1           \
 -databaseType               MULTIPURPOSE        \
 -memoryMgmtType             auto_sga            \
 -totalMemory                1024                \
 -storageType                FS                  \
 -datafileDestination        /u02/oradata        \
 -recoveryAreaDestination    /backup             \
 -recoveryAreaSize           20480               \
 -redoLogFileSize            50                  \
 -emConfiguration            NONE		  

$ export ORACLE_SID=TESTE
$ sqlplus / as sysdba

SQL> show pdbs;
SQL> alter pluggable database all open;
SQL> alter pluggable database all save state;


===============================================================
== Verificando o banco criado
===============================================================

$ ps -ef | grep pmon

$ cat /etc/oratab

$ du -sh /u02/oradata/*


===============================================================
== Criar outros pdbs (ORCLCDB1)
===============================================================

$ export ORACLE_SID=ORCLCDB
$ sqlplus / as sysdba

SQL> create pluggable database pdb2 admin user pdb_admin identified by
SQL> create pluggable database soe admin user pdb_admin identified by "\

SQL> show pdbs;
SQL> alter pluggable database all open;
SQL> alter pluggable database all save state;



cdb1:/u01/app/oracle/product/19c/db_1:N
NONCDB:/u01/app/oracle/product/19c/db_2:N
TESTE:/u01/app/oracle/product/19c/db_3:N



source ~/.bash_profile
